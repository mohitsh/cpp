#include<iostream>
#include<vector>
#include<iterator>
#include<sstream>
#include<algorithm>

using namespace std;


int givePositive(int val){ return val>0;}

void rotateMat(vector< vector<long long> > &mat, long long row_min, long long row_max, 
        long long col_min, long long col_max)
{

    // rotate left row 
    long long col = col_min;
    long long prev = mat[row_min][col];
    long long new_elem;
    for (long long i = row_min; i<row_max-1; ++i)
    {
       new_elem = mat[i+1][col];
       mat[i+1][col] =  prev;
       prev =  new_elem;
    }



    // rotate bottom col
    long long row = row_max-1;
    prev = new_elem;

    for (long long j = col_min; j<col_max-1; ++j)
    {
        new_elem = mat[row][j+1];
        mat[row][j+1] = prev;
        prev = new_elem;
    }


    
    // rotate right row        
    col = col_max-1;
    prev = new_elem;
    for (long long i = row_max-1; i>row_min; --i)
    {
        new_elem = mat[i-1][col];
        mat[i-1][col] = prev;
        prev = new_elem;
    }


    // rotate top col;
    row = row_min;
    prev = new_elem;
    for (long long j = col_max-1; j>col_min+1; --j)
    {
        new_elem = mat[row][j-1];
        mat[row][j-1] = prev;
        prev = new_elem;
    }


    // fix first element
    
    mat[row_min][col_min] = new_elem;
   
}


int main()
{

    long long m, n, r;
    cin >> m >> n >> r;
    cin.ignore();

    vector<vector<long long>> mat;

    for (long long i = 0; i<m; ++i)
    {
        string rawInput;
        string buf;

        getline(cin, rawInput);
        stringstream ss(rawInput);

        vector<long long> tokens;
        while(ss>>buf)
        {
            long long elem = stoi(buf);
            tokens.push_back(elem);
        }
        mat.push_back(tokens);
    }

    

    ostream_iterator<long long> print(cout, " ");

    long long repeat = 1;
    int m1, n1;
    m1 = m; n1=n;
    int size = (m1/2 < n1/2) ? m1/2 : n1/2;
    vector<int> vRepeat(size);

    vRepeat = 
    vector<long long>::iterator it = find_if(vRepeat.begin(), vRepeat.end(), givePositive);
    while ( m1 > 1 && n1 > 1)
    {
        repeat = (m1 + m1 + n1-2 + n1-2);
        vRepeat.push_back(repeat);
        cout << repeat << endl;

        m1 = m1-1;
        n1 = n1-1;
    }

    copy(vRepeat.begin(), vRepeat.end(), print);
    cout << "repeat: " << repeat << endl;
    //r = r%repeat;

    for (long long k = 0; k<r; ++k)
    {
        long long row_max, row_min, col_max, col_min;
        row_min = 0;
        row_max = m;
        col_min = 0;
        col_max = n;
     
        while (row_min < row_max && col_min < col_max)
        {
            rotateMat(mat, row_min, row_max, col_min, col_max);
            row_min += 1;
            row_max -= 1;
            col_min += 1;
            col_max -= 1;
        }
    


        //cout << endl << " ROTATED " << endl;

        //for (long long i = 0; i<mat.size(); ++i)
        //{
        //    copy(mat[i].begin(), mat[i].end(), print);
        //    cout << endl;
        //}

    }  


    for (long long i = 0; i<mat.size(); ++i)
    {
        copy(mat[i].begin(), mat[i].end(), print);
        cout << endl;
    }

    return 0;

}


